# HTTPS 与 HTTP 的区别与工作原理

## 1. HTTPS 和 HTTP 有哪些区别

HTTPS 和 HTTP 的主要区别在于安全性和信息加密。HTTP 的信息是明文传输的，因此存在以下三种安全风险：
- **窃听风险**：信息可能被第三方窃取。
- **篡改风险**：信息可能在传输过程中被篡改。
- **冒充风险**：可能遭遇伪装成合法服务器的攻击。

HTTPS 通过在 HTTP 和 TCP 层之间加入 **TLS 层**，很好地解决了这些问题：
- 使用 **混合加密算法** 实现信息加密，解决窃听风险。
- 通过 **摘要算法** 为信息生成唯一的哈希值，用于校验信息，解决篡改风险。
- 将服务器公钥存放在 **数字证书** 中，解决冒充风险。

此外，HTTPS 的默认端口号是 **443**，而 HTTP 的默认端口号是 **80**。由于 HTTPS 增加了 TLS 层，客户端和服务端在使用 HTTPS 协议连接时，除了进行 TCP 的三次握手，还需要进行 **SSL/TLS 的握手过程**。

---

## 2. HTTPS 的工作原理（建立连接的过程）

HTTPS 建立连接需要经过 **TCP 三次握手** 和 **TLS 四次握手**。以下是 TLS 握手的具体过程：

1. **客户端发起请求**  
  客户端向服务器发起加密通信请求，包含以下信息：
  - 支持的 TLS 版本。
  - 客户端生成的随机数。
  - 客户端支持的密码套件列表。

2. **服务器响应客户端**  
  服务器收到请求后，返回以下信息：
  - 确认的 TLS 协议版本（如果客户端不支持，则关闭加密通信）。
  - 确认的密码套件。
  - 服务器生成的随机数。
  - 服务器的数字证书。

3. **客户端验证并发送加密信息**  
  客户端验证数字证书的真实性。如果验证通过，客户端从证书中提取公钥，并发送以下加密信息：
  - 一个随机数。
  - 加密通信算法的改变通知（表示后续通信将使用会话密钥加密）。
  - 客户端握手结束通知。

4. **服务器解密并完成握手**  
  服务器使用私钥解密客户端发送的信息，获取随机数。此时，客户端和服务器通过以下步骤生成会话密钥：
  - 利用三个随机数（客户端随机数、服务器随机数、客户端发送的随机数）。
  - 协商出的加密算法。

  最后，服务器向客户端发送以下信息：
  - 加密通信算法的改变通知。
  - 服务器握手结束通知。

完成以上步骤后，TLS 握手阶段结束，客户端和服务器进入 **会话密钥加密通信** 阶段。

---

## 3. 小林coding
[点击跳转](https://xiaolincoding.com/network/2_http/http_interview.html#http-%E4%B8%8E-https)
<GiscusComment />